<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscription Plans - Platform Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .sidebar { width: 250px; position: fixed; height: 100vh; overflow-y: auto; }
        .main-content { margin-left: 250px; padding: 20px; }
        .plan-card { transition: transform 0.2s; position: relative; }
        .plan-card:hover { transform: translateY(-5px); }
        .plan-card.featured { border: 2px solid #007bff; }
        .plan-badge { position: absolute; top: -10px; right: 20px; }
    </style>
</head>
<body>
    <div class="d-flex">
        <!-- Sidebar -->
        <div id="sidebar"></div>
        
        <!-- Main Content -->
        <div class="main-content flex-grow-1">
            <div id="header"></div>
            
            <div class="container-fluid">
                <!-- Breadcrumb -->
                <div id="breadcrumb"></div>
                
                <!-- Page Header -->
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h1 class="h3 mb-0">Subscription Plans</h1>
                        <p class="text-muted">Manage platform subscription tiers and pricing</p>
                    </div>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createPlanModal">
                        <i class="fas fa-plus me-2"></i> Create New Plan
                    </button>
                </div>
                
                <!-- Plan Stats -->
                <div class="row mb-4" id="plan-stats"></div>
                
                <!-- Subscription Plans -->
                <div class="row">
                    <!-- Starter Plan -->
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card plan-card h-100">
                            <div class="card-body text-center p-4">
                                <h4 class="card-title text-primary">Starter</h4>
                                <div class="mb-4">
                                    <span class="h2">$99</span>
                                    <span class="text-muted">/month</span>
                                </div>
                                <ul class="list-unstyled text-start">
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Up to 100 users</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Basic marketplace features</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Email support</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> 5GB storage</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Basic analytics</li>
                                    <li class="mb-2"><i class="fas fa-times text-muted me-2"></i> Advanced features</li>
                                    <li class="mb-2"><i class="fas fa-times text-muted me-2"></i> Custom branding</li>
                                </ul>
                            </div>
                            <div class="card-footer">
                                <div class="text-center">
                                    <small class="text-muted">2 tenants using</small>
                                </div>
                                <div class="btn-group w-100 mt-2">
                                    <button class="btn btn-outline-primary btn-sm">Edit</button>
                                    <button class="btn btn-outline-secondary btn-sm">Analytics</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Business Plan -->
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card plan-card h-100">
                            <div class="card-body text-center p-4">
                                <h4 class="card-title text-success">Business</h4>
                                <div class="mb-4">
                                    <span class="h2">$299</span>
                                    <span class="text-muted">/month</span>
                                </div>
                                <ul class="list-unstyled text-start">
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Up to 500 users</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> All marketplace features</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Priority support</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> 25GB storage</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Advanced analytics</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Custom branding</li>
                                    <li class="mb-2"><i class="fas fa-times text-muted me-2"></i> API access</li>
                                </ul>
                            </div>
                            <div class="card-footer">
                                <div class="text-center">
                                    <small class="text-muted">3 tenants using</small>
                                </div>
                                <div class="btn-group w-100 mt-2">
                                    <button class="btn btn-outline-primary btn-sm">Edit</button>
                                    <button class="btn btn-outline-secondary btn-sm">Analytics</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Professional Plan -->
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card plan-card featured h-100">
                            <span class="badge bg-primary plan-badge">Popular</span>
                            <div class="card-body text-center p-4">
                                <h4 class="card-title text-warning">Professional</h4>
                                <div class="mb-4">
                                    <span class="h2">$599</span>
                                    <span class="text-muted">/month</span>
                                </div>
                                <ul class="list-unstyled text-start">
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Up to 2,000 users</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> All marketplace features</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> 24/7 support</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> 100GB storage</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Premium analytics</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Full customization</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> API access</li>
                                </ul>
                            </div>
                            <div class="card-footer">
                                <div class="text-center">
                                    <small class="text-muted">4 tenants using</small>
                                </div>
                                <div class="btn-group w-100 mt-2">
                                    <button class="btn btn-outline-primary btn-sm">Edit</button>
                                    <button class="btn btn-outline-secondary btn-sm">Analytics</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Enterprise Plan -->
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card plan-card h-100">
                            <div class="card-body text-center p-4">
                                <h4 class="card-title text-danger">Enterprise</h4>
                                <div class="mb-4">
                                    <span class="h2">$1,299</span>
                                    <span class="text-muted">/month</span>
                                </div>
                                <ul class="list-unstyled text-start">
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Unlimited users</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> All features included</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Dedicated support</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Unlimited storage</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Enterprise analytics</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> White-label options</li>
                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Full API suite</li>
                                </ul>
                            </div>
                            <div class="card-footer">
                                <div class="text-center">
                                    <small class="text-muted">3 tenants using</small>
                                </div>
                                <div class="btn-group w-100 mt-2">
                                    <button class="btn btn-outline-primary btn-sm">Edit</button>
                                    <button class="btn btn-outline-secondary btn-sm">Analytics</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Plan Usage Analytics -->
                <div class="row mt-4">
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Plan Adoption Over Time</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="adoptionChart" height="100"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Plan Distribution</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="distributionChart" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Plan Management Table -->
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="mb-0">Plan Management</h5>
                    </div>
                    <div class="card-body">
                        <div id="plans-table"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Create Plan Modal -->
    <div id="createPlanModal"></div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../components.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sidebar items
            const sidebarItems = [
                { label: 'Dashboard', icon: 'fas fa-tachometer-alt', href: 'index.html' },
                { label: 'Tenant Management', icon: 'fas fa-building', href: 'tenants.html' },
                { label: 'Revenue Analytics', icon: 'fas fa-chart-line', href: 'revenue.html' },
                { label: 'Subscription Plans', icon: 'fas fa-tags', active: true },
                { label: 'Feature Sets', icon: 'fas fa-puzzle-piece', href: 'features.html' },
                { label: 'Industry Templates', icon: 'fas fa-layer-group', href: 'templates.html' },
                { label: 'Schema Builder', icon: 'fas fa-database', href: 'schemas.html' },
                { label: 'API Management', icon: 'fas fa-plug', href: 'api.html' },
                { label: 'System Monitoring', icon: 'fas fa-heartbeat', href: 'monitoring.html' },
                { label: 'Documentation', icon: 'fas fa-book', href: 'docs.html' },
                { label: 'Workflows', icon: 'fas fa-project-diagram', href: 'workflows.html' },
                { label: 'Support Tickets', icon: 'fas fa-ticket-alt', href: 'support.html' },
                { label: 'Platform Settings', icon: 'fas fa-cog', href: 'settings.html' }
            ];
            
            document.getElementById('sidebar').innerHTML = createSidebar('Platform', sidebarItems);
            document.getElementById('header').innerHTML = createHeader('Admin User', 'Super Admin', 'Platform');
            
            // Breadcrumb
            const breadcrumbItems = [
                { label: 'Platform', href: 'index.html' },
                { label: 'Subscription Plans' }
            ];
            document.getElementById('breadcrumb').innerHTML = createBreadcrumb(breadcrumbItems);
            
            // Stats
            const statsHtml = [
                createStatCard('Active Plans', '4', 'fas fa-tags', 'primary'),
                createStatCard('Total Subscribers', '12', 'fas fa-users', 'success'),
                createStatCard('Monthly Revenue', '$24,890', 'fas fa-dollar-sign', 'warning'),
                createStatCard('Avg. Revenue per User', '$2,074', 'fas fa-chart-line', 'info')
            ].join('');
            document.getElementById('plan-stats').innerHTML = statsHtml;
            
            // Adoption Chart
            const ctx = document.getElementById('adoptionChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Starter',
                        data: [1, 1, 2, 2, 2, 2],
                        borderColor: 'rgb(54, 162, 235)',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        tension: 0.1
                    }, {
                        label: 'Business',
                        data: [1, 2, 2, 3, 3, 3],
                        borderColor: 'rgb(75, 192, 192)',
                        backgroundColor: 'rgba(75, 192, 192, 0.1)',
                        tension: 0.1
                    }, {
                        label: 'Professional',
                        data: [1, 2, 3, 3, 4, 4],
                        borderColor: 'rgb(255, 205, 86)',
                        backgroundColor: 'rgba(255, 205, 86, 0.1)',
                        tension: 0.1
                    }, {
                        label: 'Enterprise',
                        data: [0, 1, 1, 2, 2, 3],
                        borderColor: 'rgb(255, 99, 132)',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { position: 'top' }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
            
            // Distribution Chart
            const ctx2 = document.getElementById('distributionChart').getContext('2d');
            new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: ['Professional', 'Business', 'Enterprise', 'Starter'],
                    datasets: [{
                        data: [4, 3, 3, 2],
                        backgroundColor: [
                            'rgb(255, 205, 86)',
                            'rgb(75, 192, 192)',
                            'rgb(255, 99, 132)',
                            'rgb(54, 162, 235)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
            
            // Plans Table
            const planHeaders = ['Plan Name', 'Price', 'Users Limit', 'Features', 'Subscribers', 'Revenue'];
            const planRows = [
                ['Professional', '$599/mo', '2,000', '7/7', '4 tenants', '$2,396/mo'],
                ['Business', '$299/mo', '500', '6/7', '3 tenants', '$897/mo'],
                ['Enterprise', '$1,299/mo', 'Unlimited', '7/7', '3 tenants', '$3,897/mo'],
                ['Starter', '$99/mo', '100', '5/7', '2 tenants', '$198/mo']
            ];
            document.getElementById('plans-table').innerHTML = createDataTable('', planHeaders, planRows);
            
            // Create Plan Modal
            const modalBody = `
                <form>
                    ${createFormInput('Plan Name', 'text', 'planName', 'Enter plan name', true)}
                    ${createFormInput('Monthly Price', 'number', 'price', '99', true)}
                    ${createFormInput('User Limit', 'number', 'userLimit', '100')}
                    <div class="mb-3">
                        <label class="form-label">Features</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="basicFeatures" checked>
                            <label class="form-check-label" for="basicFeatures">Basic Marketplace Features</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="analytics">
                            <label class="form-check-label" for="analytics">Advanced Analytics</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="customBranding">
                            <label class="form-check-label" for="customBranding">Custom Branding</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="apiAccess">
                            <label class="form-check-label" for="apiAccess">API Access</label>
                        </div>
                    </div>
                    ${createFormInput('Storage Limit (GB)', 'number', 'storage', '5')}
                    <div class="mb-3">
                        <label class="form-label">Support Level</label>
                        <select class="form-select" required>
                            <option value="email">Email Support</option>
                            <option value="priority">Priority Support</option>
                            <option value="24-7">24/7 Support</option>
                            <option value="dedicated">Dedicated Support</option>
                        </select>
                    </div>
                </form>
            `;
            const modalFooter = `
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Create Plan</button>
            `;
            document.getElementById('createPlanModal').innerHTML = createModal('createPlanModal', 'Create New Plan', modalBody, modalFooter);
        });
    </script>
</body>
</html>